CREATE TABLE FAMILIAS (
    CodFamilia VARCHAR2(6),
    NomFamilia VARCHAR2(20)
);

CREATE TABLE ARTICULOS (
    CodArticulo VARCHAR2(6),
    NomArticulo VARCHAR2(20),
    Precio NUMBER(12,2),
    CodFamilia VARCHAR2(6) NOT NULL
);

CREATE TABLE FACTURAS (
    NumFactura NUMBER(20),
    FechaFactura DATE,
    CodCliente VARCHAR2(6) NOT NULL
);

CREATE TABLE CLIENTES (
    CodCliente VARCHAR2(6),
    NomCliente VARCHAR2(20)
);

CREATE TABLE LINEAS_FACTURAS (
    CodArticulo VARCHAR2(6) NOT NULL,
    NumFactura NUMBER(20) NOT NULL
);

COMMIT;

ALTER TABLE FAMILIAS ADD CONSTRAINT PK_FAMILIAS PRIMARY KEY (CodFamilia);
ALTER TABLE ARTICULOS ADD CONSTRAINT PK_ARTICULOS PRIMARY KEY (CodArticulo);
ALTER TABLE FACTURAS ADD CONSTRAINT PK_FACTURAS PRIMARY KEY (NumFactura);
ALTER TABLE CLIENTES ADD CONSTRAINT PK_CLIENTES PRIMARY KEY (CodCliente);
ALTER TABLE LINEAS_FACTURAS ADD CONSTRAINT PK_LINEAS_FACTURAS PRIMARY KEY (CodArticulo,NumFactura);

COMMIT;

ALTER TABLE ARTICULOS ADD CONSTRAINT FK_ARTICULOS_FAMILIAS FOREIGN KEY (CodFamilia) REFERENCES FAMILIAS (CodFamilia);
ALTER TABLE FACTURAS ADD CONSTRAINT FK_FACTURAS_CLIENTES FOREIGN KEY (CodCliente) REFERENCES CLIENTES (CodCliente);
ALTER TABLE LINEAS_FACTURAS ADD CONSTRAINT FK_LINEAS_FACTURAS_ARTICULOS FOREIGN KEY (CodArticulo) REFERENCES ARTICULOS (CodArticulo);
ALTER TABLE LINEAS_FACTURAS ADD CONSTRAINT FK_LINEAS_FACTURAS_FACTURAS FOREIGN KEY (NumFactura) REFERENCES FACTURAS (NumFactura);

-- Insertar datos en la tabla FAMILIAS
INSERT INTO FAMILIAS (CodFamilia, NomFamilia) VALUES ('FAM001', 'Electrónicos');
INSERT INTO FAMILIAS (CodFamilia, NomFamilia) VALUES ('FAM002', 'Ropa');
INSERT INTO FAMILIAS (CodFamilia, NomFamilia) VALUES ('FAM003', 'Muebles');
INSERT INTO FAMILIAS (CodFamilia, NomFamilia) VALUES ('FAM004', 'PlayStation');

-- Insertar datos en la tabla ARTICULOS
INSERT INTO ARTICULOS (CodArticulo, NomArticulo, Precio, CodFamilia) VALUES ('ART001', 'Smartphone', 500, 'FAM001');
INSERT INTO ARTICULOS (CodArticulo, NomArticulo, Precio, CodFamilia) VALUES ('ART002', 'Laptop', 1200, 'FAM001');
INSERT INTO ARTICULOS (CodArticulo, NomArticulo, Precio, CodFamilia) VALUES ('ART003', 'Camiseta', 20, 'FAM002');
INSERT INTO ARTICULOS (CodArticulo, NomArticulo, Precio, CodFamilia) VALUES ('ART004', 'Silla', 80, 'FAM003');

-- Insertar datos en la tabla CLIENTES
INSERT INTO CLIENTES (CodCliente, NomCliente) VALUES ('CLI001', 'Juan Perez');
INSERT INTO CLIENTES (CodCliente, NomCliente) VALUES ('CLI002', 'Ana Rodriguez');
INSERT INTO CLIENTES (CodCliente, NomCliente) VALUES ('CLI003', 'Pedro Gomez');

-- Insertar datos en la tabla FACTURAS
INSERT INTO FACTURAS (NumFactura, FechaFactura, CodCliente) VALUES (1, TO_DATE('2023-11-22', 'YYYY-MM-DD'), 'CLI001');
INSERT INTO FACTURAS (NumFactura, FechaFactura, CodCliente) VALUES (2, TO_DATE('2023-11-23', 'YYYY-MM-DD'), 'CLI002');
INSERT INTO FACTURAS (NumFactura, FechaFactura, CodCliente) VALUES (3, TO_DATE('2023-11-24', 'YYYY-MM-DD'), 'CLI003');

-- Insertar datos en la tabla LINEAS_FACTURAS
INSERT INTO LINEAS_FACTURAS (CodArticulo, NumFactura) VALUES ('ART002', 1);
INSERT INTO LINEAS_FACTURAS (CodArticulo, NumFactura) VALUES ('ART001', 1);
INSERT INTO LINEAS_FACTURAS (CodArticulo, NumFactura) VALUES ('ART003', 2);
INSERT INTO LINEAS_FACTURAS (CodArticulo, NumFactura) VALUES ('ART004', 3);